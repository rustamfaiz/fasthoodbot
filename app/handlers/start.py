import asyncio
from aiogram import Router, types, Bot
from aiogram.filters import CommandStart
from aiogram.utils.keyboard import InlineKeyboardBuilder

router = Router()

@router.message(CommandStart())
async def start_handler(message: types.Message):
    builder = InlineKeyboardBuilder()
    builder.button(text="üí∏ –ü–æ–ª—É—á–∏—Ç—å –∫–Ω–∏–≥—É", callback_data="get_book")
    builder.button(text="üéØ –ß—Ç–æ —Ç—ã –ø–æ–ª—É—á–∏—à—å –∏–∑ —ç—Ç–æ–π –∫–Ω–∏–≥–∏", callback_data="about_book")
    builder.adjust(1)

    part1 = (
        "üéØ <b>–ü–æ–∑–¥—Ä–∞–≤–ª—è—é.</b>\n"
        "–ù–æ–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞. –ù–æ–≤—ã–π –∑–∞—Ö–æ–¥. –û—á–µ—Ä–µ–¥–Ω–æ–π —Å—Ç–∞—Ä—Ç –ø—Ä–æ—Ç–∏–≤ –∂–∏—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—Å—ë –µ—â—ë —Å —Ç–æ–±–æ–π.\n\n"
        "‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî ‚Äî\n\n"
        "–î–∞–≤–∞–π —á–µ—Å—Ç–Ω–æ ‚Äî —É —Ç–µ–±—è —É–∂–µ –±—ã–ª–∏ –¥–∏–µ—Ç—ã, –±—ã–ª –±–µ–≥, –±—ã–ª–∞ –Ω–∞–¥–µ–∂–¥–∞ —É–≤–∏–¥–µ—Ç—å –ø–ª–æ—Å–∫–∏–π –∂–∏–≤–æ—Ç ‚Äî —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–∞–∑, –±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞.\n"
        "–ù–æ –≤–º–µ—Å—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ ‚Äî —Å–Ω–æ–≤–∞ —Ü–∏—Ñ—Ä—ã —Ç—É–¥–∞-—Å—é–¥–∞. –ò —Å–Ω–æ–≤–∞ –Ω–∏—á–µ–≥–æ."
    )

    part2 = (
        "üëã –ü—Ä–∏–≤–µ—Ç. –ú–µ–Ω—è –∑–æ–≤—É—Ç –†—É—Å—Ç–∞–º.\n"
        "–í 2019 –≥–æ–¥—É —è —Å–∂—ë–≥ –¥–≤–∞–¥—Ü–∞—Ç—å –∫–∏–ª–æ–≥—Ä–∞–º–º–æ–≤ ‚Äî —á–µ—Ä–µ–∑ –≥–æ–ª–æ–¥, –±–µ–≥, –ø–æ–ª–Ω–æ–µ –æ—Ç—Ä–µ—á–µ–Ω–∏–µ –æ—Ç —Å–ª–∞–¥–∫–æ–≥–æ, –º—É—á–Ω–æ–≥–æ –∏ –∂–∏–∑–Ω–∏.\n\n"
        "–ù–∞—Å—Ç–æ–ª—å–∫–æ —É—à—ë–ª –≤ –ø—Ä–æ—Ü–µ—Å—Å, —á—Ç–æ —Ä–∞–∑–æ–±—Ä–∞–ª —Ñ–∏–∑–∏–æ–ª–æ–≥–∏—é, –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥–∏—é –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—É—é –º–µ—Ö–∞–Ω–∏–∫—É –¥–æ –∫–æ—Å—Ç–µ–π.\n"
        "–ü–æ—Ç–æ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –Ω–∞–±–∏—Ä–∞–ª –∂–∏—Ä ‚Äî –∏ —Å–∂–∏–≥–∞–ª –µ–≥–æ —Å–Ω–æ–≤–∞. –ù–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑.\n"
        "–°–∏—Å—Ç–µ–º–Ω–æ. –ë–µ–∑ –≥–æ–ª–æ–¥–∞, –±–µ–∑ –±–µ–≥–∞ –∏ —Å–æ –≤–∫—É—Å–æ–º –∂–∏–∑–Ω–∏. –ó–∞ 4 –º–µ—Å—è—Ü–∞.\n\n"
        "–¢–∞–∫ –∏ –ø–æ—è–≤–∏–ª–∞—Å—å —ç—Ç–∞ –∫–Ω–∏–≥–∞.\n"
        "–ù–µ –∏–∑ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è. –ê –∏–∑ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤ –±–æ—Ä—å–±–µ —Å —Ñ–∏—Ç–Ω–µ—Å-–º–∏—Ñ–∞–º–∏ –∏ –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–º–∏ —Ä–∏—Ç—É–∞–ª–∞–º–∏.\n\n"
        "üö´ –≠—Ç–æ –Ω–µ –ø—Ä–æ –º–æ—Ç–∏–≤–∞—Ü–∏—é. –≠—Ç–æ –ø—Ä–æ –º–µ—Ç–æ–¥.\n"
        "üî• –ö–∞–∫ –∑–∞ 4 –º–µ—Å—è—Ü–∞ —É–±—Ä–∞—Ç—å –∂–∏—Ä ‚Äî –∏ –Ω–µ –≤–µ—Ä–Ω—É—Ç—å –µ–≥–æ –±–æ–ª—å—à–µ –Ω–∏–∫–æ–≥–¥–∞.\n\n"
        "‚¨áÔ∏è –ñ–º–∏ –∫–Ω–æ–ø–∫—É ‚Äî –∏ –ø–æ–ª—É—á–∏ —Å–≤–æ—é –∫–Ω–∏–≥—É."
    )

    await message.answer(part1)
    await asyncio.sleep(5)
    await message.answer(part2, reply_markup=builder.as_markup(), disable_web_page_preview=True)

@router.callback_query(lambda c: c.data == "about_book")
async def about_book(callback: types.CallbackQuery, bot: Bot):
    builder = InlineKeyboardBuilder()
    builder.button(text="üî¥ –ü–æ–ª—É—á–∏—Ç—å –∫–Ω–∏–≥—É", callback_data="get_book")
    builder.button(text="üîµ –í–µ—Ä–Ω—É—Ç—å—Å—è", callback_data="back_to_start")
    builder.adjust(1)

    intro = (
        "üìò –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫–Ω–∏–≥–∞ —Å–æ —Å–∫—É—á–Ω—ã–º —Ä–∞—Å—Å–∫–∞–∑–æ–º —á—Ç–æ –¥–µ–ª–∞—Ç—å, –∫—É—á–µ–π –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ —É–º–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º.\n"
        "–≠—Ç–æ –ø—Ä—è–º–æ–π —É–¥–∞—Ä –ø–æ –≤—Å–µ–º —Ñ–∏—Ç–Ω–µ—Å-–º–∏—Ñ–∞–º, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö —Ç—ã —Å–ª–∏–≤–∞–ª –≥–æ–¥—ã.\n"
        "–ë–µ–∑ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–ø–ª–µ–π, –±–µ–∑ ‚Äú–≤—Å—ë –ø–æ–ª—É—á–∏—Ç—Å—è‚Äù, –±–µ–∑ –±—Ä–æ–∫–∫–æ–ª–∏ –Ω–∞ –ø–∞—Ä—É.\n\n"
        "–ó–¥–µ—Å—å ‚Äî –º–µ—Ç–æ–¥.\n"
        "4 –º–µ—Å—è—Ü–∞. –ë–µ–∑ –≥–æ–ª–æ–¥–∞. –ë–µ–∑ –±–µ–≥–∞. –ë–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∂–∏—Ä–∞.\n"
        "–í–æ—Ç —á—Ç–æ —Ç—ã –ø–æ–ª—É—á–∞–µ—à—å:"
    )

    await callback.message.answer(intro)

    items = [
        "‚ñ™Ô∏è –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –∂–∏—Ä–æ—Å–∂–∏–≥–∞–Ω–∏—è, —Å–æ–±—Ä–∞–Ω–Ω—ã–π –ø–æ —Ñ–∏–∑–∏–æ–ª–æ–≥–∏–∏, –∞ –Ω–µ –ø–æ –º–Ω–µ–Ω–∏—é —Ç—Ä–µ–Ω–µ—Ä–æ–≤",
        "‚ñ™Ô∏è –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–∏—Ç–∞–Ω–∏—è, –≥–¥–µ –µ—Å—Ç—å –º—è—Å–æ, —Ö–ª–µ–±, –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã ‚Äî –∏ –ø—Ä–∏ —ç—Ç–æ–º –∂–∏—Ä —É—Ö–æ–¥–∏—Ç",
        "‚ñ™Ô∏è –ß–µ—Å—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç, –ø–æ—á–µ–º—É ‚Äú–ü–ü‚Äù –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏ —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–º–µ—Å—Ç–æ",
        "‚ñ™Ô∏è –†–∞–∑–±–æ—Ä, –ø–æ—á–µ–º—É –¥–∏–µ—Ç—ã –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–∞–ª–∏–≤–∞—é—Ç—Å—è ‚Äî –∏ –∫–∞–∫ –Ω–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç—É –∂–µ —è–º—É",
        "‚ñ™Ô∏è –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ ‚Äî —Ç—Ä–∏ —Ñ–∞–∑—ã, –≤–µ—Å—å –∑–∞–ª, —Ä–∞—Å–ø–∏—Å–∞–Ω–æ –ø–æ –Ω–µ–¥–µ–ª—è–º",
        "‚ñ™Ô∏è –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–µ–ª–∞ ‚Äî –∫–∞–∫ –æ–Ω–æ —Ä–µ–∞–ª—å–Ω–æ —Ç—Ä–∞—Ç–∏—Ç –∂–∏—Ä, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∏–Ω—Å—É–ª–∏–Ω, –∏ –∫–∞–∫ —É–ø—Ä–∞–≤–ª—è—Ç—å –∞–ø–ø–µ—Ç–∏—Ç–æ–º",
        "‚ñ™Ô∏è –ü–æ–Ω–∏–º–∞–Ω–∏–µ –∫–∞–∫ —É–¥–µ—Ä–∂–∞—Ç—å —Ñ–æ—Ä–º—É ‚Äî —á—Ç–æ–±—ã –Ω–µ –Ω–∞–±—Ä–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ, –¥–∞–∂–µ –µ—Å–ª–∏ –∂–∏–∑–Ω—å —Å–Ω–æ–≤–∞ –Ω–∞—á–Ω—ë—Ç –≤–∞–ª–∏—Ç—å—Å—è",
        "‚ñ™Ô∏è –ù–æ–≤–æ–µ —Ç–µ–ª–æ. –†–µ–∞–ª—å–Ω–æ. –ó–∞ 4 –º–µ—Å—è—Ü–∞. –ë–µ–∑ –≤–æ–¥—ã. –ë–µ–∑ –æ—Ç–∫–∞—Ç–∞. –ë–µ–∑ –∏–ª–ª—é–∑–∏–π.",
    ]

    for item in items:
        await asyncio.sleep(2)
        await bot.send_message(chat_id=callback.from_user.id, text=item)

    await asyncio.sleep(2)
    await bot.send_photo(
        chat_id=callback.from_user.id,
        photo="https://i.imgur.com/jX4pQcI.jpeg",
        reply_markup=builder.as_markup()
    )

@router.callback_query(lambda c: c.data == "back_to_start")
async def back_to_start(callback: types.CallbackQuery):
    await start_handler(callback.message)
